<!DOCTYPE html>
<html>
 <head>
    <title>Simple Template Example</title>
    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script src="http://d3js.org/topojson.v1.min.js"></script>
    <script type="text/javascript" src="csv.js"></script>

 </head>
 <body>


     <button id="prices" value="Prices">Prices</button><br>

    <svg id="svg"></svg>
    <script type="text/javascript">


    var width = 1000,
    height = 1000;
    var arrays = [];
    var jsonCircles = [
       { "x_axis": 900, "y_axis": 900, "radius": 3, "color" : "green" },
       { "x_axis": 30, "y_axis": 30, "radius": 3, "color" : "purple"},
       { "x_axis": 450, "y_axis": 450, "radius": 3, "color" : "red"}];
 
    var svgContainer = d3.select('body').append('svg')
    .attr('width', width)
    .attr('height', height);


    function latit(lt) {
       return 1000 - (lt%47.6)*10000 * 1.4
    }

    function longit(ln) {
        return 1000 + (ln%-122.27) * 10000 * 1.5
    }

    d3.select("#prices").on("click", function(d,i)
    {
        if(arrays.length == 0) {
            d3.csv("data.csv", function(data) {
                data.forEach(function(d) {
                {
                    arrays.push(d);
                }
            });
            });

        }
        else {
            var circles = svgContainer.selectAll("circle")
                          .data(arrays)
                          .enter()
                          .append("circle");

            var circleAttributes = circles
                            .attr("cx", function (d) { return longit(d.Longitude); })
                            .attr("cy", function (d) { return latit(d.Latitude) + 5; })
                            .attr("r", function (d) { return 3; })
                            .style("stroke", "black")
                            .style("fill", "green");
        }
        console.log(arrays);
    })
        //init();
    </script>


 </body>
</html>
